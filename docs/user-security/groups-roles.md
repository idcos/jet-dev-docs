---
sidebar_position: 2
sidebar_label: '组与角色'
---
## 组和角色

正如我们在前一章中了解到的，将角色分配给组，然后将用户添加到这些组几乎总是最佳做法。实际上，直接向用户添加角色从来都不是一个好主意。遵循这一最佳实践指导原则可以让角色管理变得越来越简单，以后也更易于管理。

JET中的角色对应于特定的权限集。它们授予对平台内模块的访问权限、执行某些操作的权限等等。某些角色（如**管理员**角色）授予特殊权限，如修改系统记录、策略和脚本的能力。在高安全性实例（启用了高安全性设置插件的实例）中，有一个更高的权限角色，称为security_admin。此角色授予修改安全规则（ACL）和执行其他安全相关任务的能力。

角色存储在**Role**[sys_user_role]表中，可以在应用程序导航器的用户管理|角色下找到。角色和用户以及角色和组之间的关联分别存储在**用户角色**[sys_user_has_role]和**组权限**[sys_group_has_role]表中。角色本身就是相当简单的记录，因为它们主要由名称和描述组成。如果选中了提升权限复选框，则某些角色需要提升。前面提到的security_admin角色就是这样一个例子。可以通过左键单击JET界面右上角的头像并单击角色提权来实现：

![角色提权](/img/user-administration-and-security/elvate-role.png)

角色可以根据需要创建，并且本质上不具有对 JET 中任何内容的访问权限。但是，JET中的某些记录将具有**用户角色**字段，该字段允许您选择查看或访问特定模块、应用程序或对象所需的角色。您还可以使用角色来控制对UI元素的访问，例如UI操作，甚至可以使用g_user.hasRole(‘role_name’)在客户端脚本上使用来控制脚本内的行为；或gs.hasRole()'role_name')在服务器上。这些方法都返回布尔值true或false，允许您根据执行操作的用户是否具有给定角色来控制其他脚本的行为和流程。

下面是一个使用脚本的**条件**字段示例gs.hasRole()：

<!--这里是一个图片-->

gs.hasRole()是一个简单的 API，它接受一个参数：一个带有您要检查的角色名称的字符串。true如果当前用户具有角色，或者false没有角色。

此外，还可以通过在某些记录类型上使用**用户角色**相关列表来请求角色：

![用户角色](/img/user-administration-and-security/userRole.png)

**注意**：

从技术上讲，前面截图中显示的**用户角色**字段是一个**嵌入式相关列表**，它**只是使用表单设计器**中的嵌入式相关列表格式化程序显示在表单内的相关列表（您可以通过右键单击表单来访问）头，并查看**配置**菜单）。

请注意，如果这两个条件（**条件**字段和**需要角色**相关列表）都存在，将分别进行评估。如果记录有**用户角色**字段，则无需使用gs.hasRole() 位于单独的条件字段中。但是，您可以在该字段中使用任何布尔表达式来检查其他一些条件。您也可以忽略**用户角色**字段，如果您愿意，可以对所有内容使用**条件**字段，尽管这可能会稍微降低效率。

角色通过名为用户角色[sys_user_has_role]的中间多对多（M2M）表链接到用户。如果该角色是由用户在某个组中的成员身份授予的（一般来说，应该是这样），则“授予者”[grated_by]字段将填充对用户组[sys_user_group]表的引用。当一个角色被一个用户在一个组中的成员授予时，这意味着这个角色已经被分配给该组的成员用户。与用户和角色之间的关系非常相似，组和角色之间的关系存储在一个单独的M2M表中：组角色[sys_group_has_role]。

就像在用户记录上一样，您可以通过修改组记录底部与角色相关的列表，将角色授予组（从而授予该组的所有成员）：

![用户组](/img/user-administration-and-security/userGroup.png)

## 



