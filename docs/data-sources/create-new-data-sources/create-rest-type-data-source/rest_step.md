---
sidebar_position: 2
sidebar_label: 'Rest步骤'
title: 'Rest步骤'
---

向外部系统发送出REST Web 服务请求。

## 角色和可用性

可用作动作设计器动作步骤。具有 action_designer 角色的用户可以使用一个或多个操作步骤创建自定义操作。

## 字段

| 字段 | 描述 |
| :-------------:| :------------- |
| 连接 | 要使用的连接类型。<br/> 1. 定义连接内联：在操作步骤中定义连接信息。<br/> 2. 使用连接别名：使用连接别名表定义连接信息。在多个环境中使用操作时，使用别名无需配置多个凭据和连接信息配置文件。同样，如果连接信息发生变化，您无需更新自定义操作。<br/>要了解有关连接和凭据的更多信息，请参阅 凭据、连接和别名简介。
| 连接别名 | 系统用于运行操作步骤的连接和凭据别名记录。具有 flow_designer 或 admin 角色的用户可以创建或选择关联的连接记录。在多个环境中使用操作时，使用别名无需配置多个凭据和连接信息配置文件。同样，如果连接信息发生变化，您无需更新自定义操作。<br/>**笔记**：当从连接列表中选择使用连接别名时，此字段可用。
| 凭据别名 | 系统用于运行操作步骤的凭证别名。具有 flow_designer 或 admin 角色的用户可以创建或选择关联的连接记录。在多个环境中使用操作时，使用别名无需配置多个凭据。同样，如果凭证信息发生更改，您无需更新自定义操作。<br/>**笔记**：当从连接列表中选择定义连接内联时，此字段可用。
| 使用MID | 使用ServiceNow® MID 服务器运行REST 步骤的选项。选中此复选框以显示MID 应用程序和 功能字段。
| 基础资源路径 | REST 请求的基本 URL。如果选择使用连接别名，则此字段为只读，并显示与别名关联的基本 URL。如果 选择定义连接内联，请输入连接的基本 URL。
| 连接超时 | 系统等待主机连接成功的毫秒数。如果该步骤在此期间没有成功连接，则连接请求超时。如果选择定义连接内联，请输入连接的超时值。将此字段留空以使用系统默认连接超时值。
| MID 选择 | 根据需要选择MID 服务器的选项。当从源连接列表中选择定义连接内联时，此字段可用。
| 能力 | MID 服务器 必须支持才能有资格选择的功能。系统从支持所选功能的MID 服务器运行操作步骤。当从连接列表中选择 定义内联连接、启用使用 MID复选框并 从 MID 选择列表中选择自动选择 MID 服务器 时，此字段可用。
| 构建请求 | 手动创建请求或导入 OpenAPI 规范的选项。<br/>1. 手动：创建操作输入并手动完成 REST 步骤表单。<br/>2. 从 OpenAPI 规范：导入 OpenAPI 规范以生成操作输入并完成 REST 步骤表单。
| 资源路径 | 资源的路径。
| HTTP 方法 |  用于处理请求的 HTTP 方法。<br/>1.GET<br/> 2. POST<br/>3. PUT<br/>4. PATCH <br/> 5. DELETE
| 查询参数 | 要传递到 REST 端点的名称-值对。您可以手动创建这些参数，或者将输入变量拖到参数字段中，然后分配一个值。<br/>支持包含重复查询参数名称的 REST 步骤请求。如果您创建的 REST 请求包含重复的查询参数名称，Flow Designer会按照您定义它们的顺序将查询参数添加到请求中。
| 请求头 | 与请求一起发送的标头。您可以手动创建标题，或将输入变量拖到参数字段中，然后分配一个值。
| 请求类型 | 请求的格式。选项包括。<br/> 1. **文本**：JSON、XML 或其他文本格式的请求。<br/>2. **Binary**：二进制文件格式的请求。<br/> 3. **Multipart**：由多种内容类型组成的请求。 <br/> 4. **表单 URL 编码**：URL 编码查询中的请求。
| 请求正文 [文本] | JSON 或 XML 格式的请求正文。流执行详细信息将响应正文显示为指向嵌入式文本查看器的链接或包含响应的附件记录的 sys_id。
| 附件 | 包含请求的附件记录。您可以在前面的步骤中查找或创建此记录并将其定义为输入变量。在脚本步骤中使用JSONStreamingBuilder和XMLStreamingBuilder API创建它。
| 名称、类型、值 | 多部分请求的内容。对于每个请求部分，指定其名称、内容类型和值。名称可以是任何有效的字符串，类型可以是任何有效的类型。该值必须与内容类型匹配。
| 名称、值 | 表单 URL 编码请求的内容。使用名称-值对指定 URL 编码请求的每个部分。
| 启用重试策略 | 启用重试策略的选项。
| 重试策略 | 与Connection Alias关联的默认重试策略 。如果选择了覆盖别名的默认策略，您可以覆盖默认重试策略并根据您的要求选择另一个现有的重试策略。

<!-- | 中间应用 | MID 服务器 必须支持才能有资格选择的功能。系统从支持所选功能的MID 服务器运行操作步骤。当从连接列表中选择 定义内联连接、启用使用 MID复选框并 从 MID 选择列表中选择自动选择 MID 服务器 时，此字段可用。 -->

<!-- | 中间服务器 | 所需MID 服务器的数据丸。当从连接列表中选择 定义内联连接、启用使用 MID复选框并 从 MID 选择列表中选择特定 MID 服务器时，此字段可用。 -->

<!-- | API 源 | 选择用于构造请求的 OpenAPI 规范的选项，或选择导入 OpenAPI 以导入新的 OpenAPI 规范。您可以通过向 YAML 或 JSON 提供 URL 或复制和粘贴内容来导入规范。
| API操作 | 从列表中选择操作的选项。可用操作由 API Source字段中的 OpenAPI 规范提供。 -->

<!-- | 覆盖别名的默认策略 | 覆盖默认重试策略的选项。当从连接列表中选择定义连接内联时，此复选框不适用。 -->

<!-- | 另存为附件 | 用于指定是否将响应保存为附件 [sys_attachment] 表中的记录的选项。
| 附件文件名 | REST 响应创建的附件的名称。例如，rest-response.txt。
| 附件文件记录 | 附件关联的目标记录。目标记录必须是 Record类型的数据药丸。例如，特定的事件记录。您可以在前面的步骤中查找此记录或将其定义为输入变量。流执行详细信息显示关联记录的 sys_id。 -->



#### REST 响应大小限制
默认情况下，系统将未保存为附件的 REST 响应的大小限制为 5 MB。超过此限制的直接 REST 响应会生成错误。要支持更大的响应大小，请将响应保存为附件或使用 glide.pf.rest.response_payload_max_size系统属性增加响应大小限制。此系统属性支持的最大值为 10 MB。

