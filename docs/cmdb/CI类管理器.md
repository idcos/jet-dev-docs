---
sidebar_position: 1
sidebar_label: 'CI类管理'
---

# Ci类管理

导航至**配置 > CI类管理**，使用 CI 类管理集中查看、创建或编辑基本类定义以及用于标识、协调和 CMDB 运行状况的类设置。


## 创建CI类
创建一个CI类（表），它是现有 CI 类的扩展。然后为新类创建标识和协调规则。创建CI类继承于cmdb_ci表（也可以为该表的子类），创建方式详见**创建表**

## 查看或编辑CI类信息

1. 导航至**配置 > CI类管理 > 基本信息**

![ciclassmanager](/img/cmdb/CIClassManager.png)

2. 点击**层次结构**展开CI类列表，然后选择一个CI类查看详情

![baseInfo](/img/cmdb/baseInfo.jpg)

3. 在右侧导航栏中展示以下信息： 
    * 基本信息：所选类的详细信息，例如表名称、描述和类图标。允许您编辑某些类定义，并防止编辑某些详细信息，例如表名
    * 属性：表字段
    * 识别规则
    * 依赖关系：当存在依赖类型识别规则时展示
    * 调和规则
    * CI列表：CI类中的记录
    
    ![sideBar](/img/cmdb/sideBar.jpg)


## 创建或编辑CI类的识别规则
标识规则用于唯一标识 CMDB 中的 CI，作为标识和协调过程的一部分。每个 CMDB 类都可以与单个标识规则相关联。 
  
1. 在**层次结构**中选择一个CI类，导航至**配置 > CI类管理 > 识别规则**
![identifyRule](/img/cmdb/identifyRule.png)
2. 点击**编辑**可以修改已有标识规则，或者**添加**可以创建新的标识规则

    添加标识规则时，填写**独立/依赖、名称、描述**属性
3. 在标识符条目中，点击现有标识符条目进行编辑，或添加创建一条新的标识符条目
4. 在标识符条目对话框中，选择一个选项，然后单击下一步。
![identifyEntry](/img/cmdb/identifyEntry.png)
    
    * 常规标识符属性：使用主表中的属性
    * lookup标识符属性：使用其他表中的属性

5. 填写对应的字段值，保存
![identifyEntrySave](/img/cmdb/identifyEntrySave.png)

| 字段            | 描述              |
| -------------- | ---------------------------------------------------------------------|
| 激活            | 指定标识符条目的复选框处于活动状态。标识规则中的至少一个标识符条目必须处于活动状态才能应用该规则 |
| 优先级          | 标识符条目的优先级。标识符条目基于优先级应用。优先级编号较低的规则具有较高的优先级。相同优先级的标识符条目是随机应用的。您可以保留优先级编号之间的间隙，因此您可以将未使用的优先级编号分配给新条目，而无需修改现有的优先级顺序 |
| 标准属性        | 唯一标识 CI 的属性集。属性可以属于当前类，也可以属于父类。注意：可以添加引用字段作为标准属性。但是，这些字段可能并不总是有效：参考字段存储指向另一个表中的记录的 sys_id，因此被认为是当前表的弱标准属性（就唯一性而言）。系统检测然后替换无效值在带有“未知”的参考字段中。例如，将无效的模型 ID 值替换为值“未知”。此外，如果多个 CI 最终将相同的参考字段设置为“未知”，则这些 CI 将成为重复的 CI |
| 允许空属性      | 选择时，如果至少一个标准属性不为空，则即使存在为空的标准属性，也允许尝试与标识符条目匹配。否则，所有标准属性都必须具有值才能尝试与标识符条目匹配 |
 

## 创建调和规则 

1. 导航至**配置 > CI类管理 > 依赖规则**
![reconciliation](/img/cmdb/reconciliation.png)
2. 在调和规则中，点击现有调和规则进行编辑，或添加创建一条新的调和规则
3. 填写发现源以及优先级，点击下一步
![discoverSource](/img/cmdb/discoverSource.png)
4. 填写相应属性，点击下一步
![applayAttribute](/img/cmdb/applayAttribute.png)
5. 填写过滤规则，保存
![filterRule](/img/cmdb/filterRule.png)





## 创建依赖关系
为 CI 类创建托管和包含规则（依赖关系规则），以帮助在业务发现过程和服务映射期间正确识别依赖CI。Discovery调用应用依赖关系规则的标识API。
1. 导航至**配置 > CI类管理 > 依赖规则**
![relationship](/img/cmdb/relationship.png)
2. 点击添加依赖，在添加依赖关系规则对话框中填写详细信息
![addRelationship](/img/cmdb/addRelationship.png)

| 字段   | 描述                                                         |
| ------ | ------------------------------------------------------------ |
| 当前类  | 规则适用的类                                                 |
| 关系    | 规则的关系类型                                               |
| 目标类   | 依赖关系规则的目标类。基于指定的关系将此类指定为子类或父类 |

